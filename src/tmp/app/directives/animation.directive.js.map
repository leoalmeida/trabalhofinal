{"version":3,"sources":["app/directives/animation.directive.ts"],"names":[],"mappings":"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","file":"app/directives/animation.directive.js","sourcesContent":["/**\n * Created by LeonardoAlmeida on 06/05/16.\n */\nimport {Directive, Input, Output, EventEmitter, ElementRef, OnInit, OnChanges} from '@angular/core';\n\n@Directive({\n    selector: '[animation]',\n    host: {\n        '(animationstart)': 'animationStarted($event)',\n        '(webkitAnimationStart)': 'animationStarted($event)',\n        '(oanimationstart)': 'animationStarted($event)',\n        '(MSAnimationStart)': 'animationStarted($event)',\n        '(animationend)': 'animationEnded($event)',\n        '(webkitAnimationEnd)': 'animationEnded($event)',\n        '(oanimationend)': 'animationEnded($event)',\n        '(MSAnimationEnd)': 'animationEnded($event)'\n    }\n})\nexport class AnimationDirective implements OnInit, OnChanges {\n    @Output() onAnimationStart = new EventEmitter<any>();\n    @Output() onAnimationEnd = new EventEmitter<any>();\n\n    @Input('animation') animationClasses: string = '';\n    @Input() play: boolean = false;\n    @Input() id: string = '';  // use for query filtering\n    @Input() group: string = ''; // use for query filtering\n\n    _animationQueue: string[] = [];\n    _callbacks: (() => void)[] = [];\n    element: Element;\n\n    constructor(element: ElementRef) {\n        this.element = element.nativeElement;\n    }\n\n    ngOnChanges(): void {\n        this.setup();\n    }\n\n    ngOnInit(): void {\n        this.setup();\n    }\n\n    addAnimation(animationClasses: string): AnimationDirective {\n        animationClasses.split(' ')\n            .map(c => this._animationQueue.push(c));\n        this.animationClasses += \" \" + animationClasses;\n        return this;\n    }\n\n    setup(): AnimationDirective {\n        this._animationQueue = this.animationClasses\n            .split(\" \")\n            .filter((c) => c.length > 0);\n\n        if(this.play && this._animationQueue.length > 0)\n            this.startAnimation();\n        return this;\n    }\n\n    startAnimation(callback: () => void = null): AnimationDirective {\n        if(callback != null)\n            this._callbacks.push(callback);\n\n        this._animationQueue.shift()\n            .split('.')\n            .filter((c) => c.length > 0)\n            .map((c) => this.element.classList.add(c));\n        return this;\n    }\n\n    cleanAnimation(): AnimationDirective {\n        this.animationClasses\n            .replace('.', ' ')\n            .split(' ')\n            .filter((c) => c.length > 0)\n            .map((c) => {\n                this.element.classList.remove(c)\n            });\n        return this;\n    }\n\n    animationStarted(event: Event): void {\n        this.onAnimationStart.next(null);\n    }\n\n    animationEnded(event: Event): void {\n        this.cleanAnimation();\n        if(this._animationQueue.length > 0){\n            this.startAnimation();\n            return;\n        }\n\n        while(this._callbacks.length > 0)\n            this._callbacks.shift()();\n\n        this.onAnimationEnd.next(null);\n    }\n}"],"sourceRoot":"/source/"}